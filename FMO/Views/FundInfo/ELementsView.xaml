<UserControl
    x:Class="FMO.ElementsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:local="clr-namespace:FMO"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:model="clr-namespace:FMO.Models;assembly=FMO.Models"
    d:DataContext="{d:DesignInstance Type=local:ElementsViewModel}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <UserControl.Resources>

        <Style
            x:Key="DeleteElement"
            BasedOn="{StaticResource ButtonBaseStyle}"
            TargetType="Button">
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Foreground" Value="Red" />
            <Setter Property="Width" Value="14" />
            <Setter Property="Height" Value="14" />
            <Setter Property="Padding" Value="1" />
        </Style>

        <ControlTemplate x:Key="Element" TargetType="ContentControl">
            <DockPanel Background="Transparent">
                <TextBlock VerticalAlignment="Center" Text="{Binding Label}" />
                <Button
                    hc:IconElement.Geometry="{StaticResource f.circle-check}"
                    Command="{Binding DataContext.ModifyCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    CommandParameter="{Binding .}"
                    DockPanel.Dock="Right"
                    Visibility="{Binding CanConfirm, Converter={StaticResource Boolean2VisibilityConverter}}" />
                <Grid
                    x:Name="x"
                    DockPanel.Dock="Right"
                    Visibility="Collapsed">
                    <Button
                        hc:IconElement.Geometry="{StaticResource f.xmark}"
                        Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                        CommandParameter="{Binding .}"
                        Style="{StaticResource DeleteElement}"
                        Visibility="{Binding CanDelete, Converter={StaticResource Boolean2VisibilityConverter}}" />
                </Grid>
                <ContentPresenter
                    Margin="4,0"
                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                    Content="{TemplateBinding Content}" />
            </DockPanel>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="x" Property="Visibility" Value="Visible" />
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="Element.Left" TargetType="ContentControl">
            <DockPanel Background="Transparent" LastChildFill="False">
                <TextBlock VerticalAlignment="Center" Text="{Binding Label}" />

                <ContentPresenter
                    Margin="4,0"
                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                    Content="{TemplateBinding Content}" />
                <Button
                    hc:IconElement.Geometry="{StaticResource f.circle-check}"
                    Command="{Binding DataContext.ModifyCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    CommandParameter="{Binding .}"
                    Visibility="{Binding CanConfirm, Converter={StaticResource Boolean2VisibilityConverter}}" />
                <Grid x:Name="x" Visibility="Collapsed">
                    <Button
                        hc:IconElement.Geometry="{StaticResource f.xmark}"
                        Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                        CommandParameter="{Binding .}"
                        Style="{StaticResource DeleteElement}"
                        Visibility="{Binding CanDelete, Converter={StaticResource Boolean2VisibilityConverter}}" />
                </Grid>
            </DockPanel>
            <ControlTemplate.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="x" Property="Visibility" Value="Visible" />
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="FundMode" TargetType="ContentControl">
            <DockPanel>
                <TextBlock VerticalAlignment="Center" Text="{Binding Label}" />
                <Button
                    hc:IconElement.Geometry="{StaticResource f.circle-check}"
                    Command="{Binding DataContext.ModifyCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    CommandParameter="{Binding .}"
                    DockPanel.Dock="Right"
                    Visibility="{Binding CanConfirm, Converter={StaticResource Boolean2VisibilityConverter}}" />
                <Grid
                    x:Name="x"
                    Margin="-4"
                    DockPanel.Dock="Right"
                    Visibility="Collapsed">
                    <Button
                        hc:IconElement.Geometry="{StaticResource f.xmark}"
                        Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                        CommandParameter="{Binding .}"
                        Style="{StaticResource DeleteElement}"
                        Visibility="{Binding CanDelete, Converter={StaticResource Boolean2VisibilityConverter}}" />
                </Grid>
                <ComboBox
                    Width="80"
                    Margin="4,0"
                    ItemsSource="{Binding Source={x:Static local:ElementsViewModel.FundModes}}"
                    SelectedItem="{Binding Data.New}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding ., Converter={StaticResource EnumDescriptionConverter}}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <TextBox
                    x:Name="other"
                    MinWidth="100"
                    Text="{Binding Extra.New, UpdateSourceTrigger=PropertyChanged, Delay=300}"
                    Visibility="Collapsed" />
            </DockPanel>
            <ControlTemplate.Triggers>
                <DataTrigger Binding="{Binding Data.New}" Value="Other">
                    <Setter TargetName="other" Property="Visibility" Value="Visible" />
                </DataTrigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter TargetName="x" Property="Visibility" Value="Visible" />
                </Trigger>

            </ControlTemplate.Triggers>
        </ControlTemplate>


        <ControlTemplate x:Key="ExItem" TargetType="ContentControl">
            <DockPanel>
                <TextBlock VerticalAlignment="Center" Text="{Binding Label}" />
                <Button
                    hc:IconElement.Geometry="{StaticResource f.circle-check}"
                    Command="{Binding DataContext.ModifyCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    CommandParameter="{Binding .}"
                    DockPanel.Dock="Right"
                    Visibility="{Binding CanConfirm, Converter={StaticResource Boolean2VisibilityConverter}}" />

                <ComboBox
                    Width="80"
                    Margin="4,0"
                    ItemsSource="{Binding Source={x:Static local:ElementsViewModel.FundModes}}"
                    SelectedItem="{Binding Data.New}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding ., Converter={StaticResource EnumDescriptionConverter}}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>

                <TextBox
                    x:Name="other"
                    MinWidth="100"
                    Text="{Binding Extra.New, UpdateSourceTrigger=PropertyChanged, Delay=300}"
                    Visibility="Collapsed" />
            </DockPanel>
        </ControlTemplate>


        <ControlTemplate x:Key="Sealing" TargetType="ContentControl">
            <DockPanel LastChildFill="False">
                <TextBlock VerticalAlignment="Center" Text="{Binding Label}" />
                <Button
                    Margin="4,0"
                    hc:IconElement.Geometry="{StaticResource f.circle-check}"
                    Command="{Binding DataContext.ModifyCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    CommandParameter="{Binding .}"
                    DockPanel.Dock="Right"
                    Visibility="{Binding CanConfirm, Converter={StaticResource Boolean2VisibilityConverter}}" />

                <ComboBox
                    Width="70"
                    Margin="4,0"
                    ItemsSource="{Binding DataContext.SealingTypes, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    SelectedItem="{Binding Type.New}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding ., Converter={StaticResource EnumDescriptionConverter}}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>


                <TextBox
                    x:Name="mon"
                    MinWidth="40"
                    Text="{Binding Month.New, UpdateSourceTrigger=PropertyChanged, Delay=300, StringFormat={}{0}个月}"
                    Visibility="Collapsed" />

                <TextBox
                    x:Name="other"
                    MinWidth="100"
                    Text="{Binding Extra.New, UpdateSourceTrigger=PropertyChanged, Delay=300}"
                    Visibility="Collapsed" />
            </DockPanel>
            <ControlTemplate.Triggers>
                <DataTrigger Binding="{Binding Type.New}" Value="Other">
                    <Setter TargetName="other" Property="Visibility" Value="Visible" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Type.New}" Value="Has">
                    <Setter TargetName="mon" Property="Visibility" Value="Visible" />
                </DataTrigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="Element.FundFee" TargetType="ContentControl">
            <DockPanel LastChildFill="False">
                <TextBlock VerticalAlignment="Center" Text="{Binding Label}" />
                <Button
                    Margin="4,0"
                    hc:IconElement.Geometry="{StaticResource f.circle-check}"
                    Command="{Binding DataContext.ModifyCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    CommandParameter="{Binding .}"
                    DockPanel.Dock="Right"
                    Visibility="{Binding CanConfirm, Converter={StaticResource Boolean2VisibilityConverter}}" />

                <ComboBox
                    Width="90"
                    Margin="4,0"
                    ItemsSource="{Binding DataContext.FundFeeTypes, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    SelectedItem="{Binding Type.New}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding ., Converter={StaticResource EnumDescriptionConverter}}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>


                <TextBox
                    x:Name="mon"
                    MinWidth="40"
                    HorizontalContentAlignment="Center"
                    Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=300}" />
                <TextBlock
                    x:Name="a"
                    Margin="4,0"
                    VerticalAlignment="Center"
                    FontSize="14"
                    Text="%"
                    Visibility="Collapsed" />
                <TextBlock
                    x:Name="b"
                    Margin="4,0"
                    VerticalAlignment="Center"
                    FontSize="14"
                    Text="元"
                    Visibility="Collapsed" />


                <TextBox
                    x:Name="other"
                    MinWidth="300"
                    Text="{Binding Extra.New, UpdateSourceTrigger=PropertyChanged, Delay=300}"
                    Visibility="Collapsed" />
            </DockPanel>
            <ControlTemplate.Triggers>
                <DataTrigger Binding="{Binding Type.New}" Value="Other">
                    <Setter TargetName="other" Property="Visibility" Value="Visible" />
                    <Setter TargetName="mon" Property="Visibility" Value="Collapsed" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Type.New}" Value="Ratio">
                    <Setter TargetName="a" Property="Visibility" Value="Visible" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Type.New}" Value="Fix">
                    <Setter TargetName="b" Property="Visibility" Value="Visible" />
                </DataTrigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>


        <ControlTemplate x:Key="Element.FundFee.G" TargetType="ContentControl">
            <DockPanel LastChildFill="False">
                <TextBlock VerticalAlignment="Center" Text="{Binding Label}" />
                <Button
                    Margin="4,0"
                    hc:IconElement.Geometry="{StaticResource f.circle-check}"
                    Command="{Binding DataContext.ModifyCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    CommandParameter="{Binding .}"
                    DockPanel.Dock="Right"
                    Visibility="{Binding CanConfirm, Converter={StaticResource Boolean2VisibilityConverter}}" />

                <ComboBox
                    Width="90"
                    Margin="4,0"
                    ItemsSource="{Binding DataContext.FundFeeTypes, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    SelectedItem="{Binding Type.New}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding ., Converter={StaticResource EnumDescriptionConverter}}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>


                <TextBox
                    x:Name="mon"
                    MinWidth="40"
                    HorizontalContentAlignment="Center"
                    Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=300}" />
                <TextBlock
                    x:Name="a"
                    Margin="4,0"
                    VerticalAlignment="Center"
                    FontSize="14"
                    Text="%"
                    Visibility="Collapsed" />
                <TextBlock
                    x:Name="b"
                    Margin="4,0"
                    VerticalAlignment="Center"
                    FontSize="14"
                    Text="元"
                    Visibility="Collapsed" />
                <TextBox
                    x:Name="other"
                    MinWidth="300"
                    Text="{Binding Extra.New, UpdateSourceTrigger=PropertyChanged, Delay=300}"
                    Visibility="Collapsed" />
                <CheckBox
                    Margin="4,0"
                    Content="保底"
                    IsChecked="{Binding IsAdopted.New}" />


                <TextBox
                    x:Name="gr"
                    MinWidth="40"
                    HorizontalContentAlignment="Center"
                    Text="{Binding Data2.New, UpdateSourceTrigger=PropertyChanged, Delay=300}"
                    Visibility="{Binding IsAdopted.New, Converter={StaticResource Boolean2VisibilityConverter}}" />

                <TextBlock
                    x:Name="ad"
                    Margin="4,0"
                    VerticalAlignment="Center"
                    FontSize="14"
                    Text="元"
                    Visibility="{Binding IsAdopted.New, Converter={StaticResource Boolean2VisibilityConverter}}" />

            </DockPanel>
            <ControlTemplate.Triggers>
                <DataTrigger Binding="{Binding Type.New}" Value="Other">
                    <Setter TargetName="other" Property="Visibility" Value="Visible" />
                    <Setter TargetName="mon" Property="Visibility" Value="Collapsed" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Type.New}" Value="Ratio">
                    <Setter TargetName="a" Property="Visibility" Value="Visible" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Type.New}" Value="Fix">
                    <Setter TargetName="b" Property="Visibility" Value="Visible" />
                </DataTrigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <ControlTemplate x:Key="Element.Bool" TargetType="ContentControl">
            <DockPanel LastChildFill="False">

                <Button
                    Margin="4,0"
                    hc:IconElement.Geometry="{StaticResource f.circle-check}"
                    Command="{Binding DataContext.ModifyCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    CommandParameter="{Binding .}"
                    DockPanel.Dock="Right"
                    Visibility="{Binding CanConfirm, Converter={StaticResource Boolean2VisibilityConverter}}" />

                <CheckBox
                    Margin="4,0"
                    Content="保底"
                    IsChecked="{Binding IsAdopted.New}" />


                <TextBox
                    x:Name="mon"
                    MinWidth="40"
                    HorizontalContentAlignment="Center"
                    Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=300}"
                    Visibility="{Binding IsAdopted.New, Converter={StaticResource Boolean2VisibilityConverter}}" />

                <TextBlock
                    x:Name="b"
                    Margin="4,0"
                    VerticalAlignment="Center"
                    FontSize="14"
                    Text="元"
                    Visibility="{Binding IsAdopted.New, Converter={StaticResource Boolean2VisibilityConverter}}" />

            </DockPanel>
        </ControlTemplate>


        <ControlTemplate x:Key="Portion.Sealing" TargetType="ContentControl">
            <DockPanel LastChildFill="False">
                <TextBlock VerticalAlignment="Center" Text="{Binding Label}" />
                <Button
                    Margin="4,0"
                    hc:IconElement.Geometry="{StaticResource f.circle-check}"
                    Command="{Binding DataContext.ModifyCommand, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    CommandParameter="{Binding .}"
                    DockPanel.Dock="Right"
                    Visibility="{Binding CanConfirm, Converter={StaticResource Boolean2VisibilityConverter}}" />

                <ComboBox
                    Width="70"
                    Margin="4,0"
                    ItemsSource="{Binding DataContext.SealingTypes, RelativeSource={RelativeSource AncestorType=local:ElementsView}}"
                    SelectedItem="{Binding Type.New}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding ., Converter={StaticResource EnumDescriptionConverter}}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>


                <TextBox
                    x:Name="mon"
                    MinWidth="40"
                    Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=300, StringFormat={}{0}个月}"
                    Visibility="Collapsed" />

                <TextBox
                    x:Name="other"
                    MinWidth="100"
                    Text="{Binding Extra.New, UpdateSourceTrigger=PropertyChanged, Delay=300}"
                    Visibility="Collapsed" />
            </DockPanel>
            <ControlTemplate.Triggers>
                <DataTrigger Binding="{Binding Type.New}" Value="Other">
                    <Setter TargetName="other" Property="Visibility" Value="Visible" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Type.New}" Value="Has">
                    <Setter TargetName="mon" Property="Visibility" Value="Visible" />
                </DataTrigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>

        <DataTemplate x:Key="DT.Portion">
            <StackPanel Margin="0,10">
                <Border
                    x:Name="bd"
                    Margin="10,5"
                    Background="WhiteSmoke">
                    <TextBlock
                        Margin="5"
                        HorizontalAlignment="Center"
                        Text="{Binding Class, StringFormat={}{0}类份额}" />
                </Border>



                <DockPanel LastChildFill="False">
                    <ContentControl DataContext="{Binding ManageFee}" Template="{StaticResource Element.FundFee}" />
                </DockPanel>





                <DockPanel LastChildFill="False">
                    <ContentControl
                        DataContext="{Binding LockingRule}"
                        Template="{StaticResource Portion.Sealing}"
                        Visibility="{Binding DataContext.IsSealingFund, RelativeSource={RelativeSource AncestorType=local:ElementsView}, Converter={StaticResource Boolean2VisibilityReConverter}}" />

                </DockPanel>

            </StackPanel>

            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Class}" Value="{x:Static model:FundElements.SingleShareKey}">
                    <Setter TargetName="bd" Property="Visibility" Value="Collapsed" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>



        <ItemsPanelTemplate x:Key="PortionItemsPanel">
            <UniformGrid IsItemsHost="True" Rows="1" />
        </ItemsPanelTemplate>

    </UserControl.Resources>

    <StackPanel Margin="0,10">
        <Grid Margin="0,2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*" />
                <ColumnDefinition Width="2*" />
            </Grid.ColumnDefinitions>
            <ContentControl DataContext="{Binding FullName}" Template="{StaticResource Element}">
                <TextBox Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=100}" />
            </ContentControl>

            <ContentControl
                Grid.Column="1"
                DataContext="{Binding ShortName}"
                Template="{StaticResource Element}">
                <TextBox Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=100}" />
            </ContentControl>
        </Grid>

        <DockPanel Margin="0,2" LastChildFill="False">

            <!--<ContentControl Template="{StaticResource FundMode}" />-->


            <ContentControl DataContext="{Binding FundModeInfo}" Template="{StaticResource FundMode}" />


            <ContentControl
                Margin="10,0"
                DataContext="{Binding SealingRule}"
                Template="{StaticResource Sealing}"
                Visibility="{Binding DataContext.IsSealingFund, RelativeSource={RelativeSource AncestorType=local:ElementsView}, Converter={StaticResource Boolean2VisibilityReConverter}}" />




            <ContentControl DataContext="{Binding OpenDayInfo}" Template="{StaticResource Element}">
                <TextBox MinWidth="300" Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=100}" />
            </ContentControl>

        </DockPanel>


        <!--  风险等级 止损预警  -->
        <DockPanel Margin="0,2" LastChildFill="False">



            <ContentControl DataContext="{Binding RiskLevel}" Template="{StaticResource Element}">
                <ComboBox
                    Width="60"
                    ItemsSource="{Binding Source={x:Static local:ElementsViewModel.RiskLevels}}"
                    SelectedItem="{Binding Data.New}" />
            </ContentControl>
            <ContentControl
                Margin="20,0,0,0"
                DataContext="{Binding DurationInMonths}"
                Template="{StaticResource Element}">
                <TextBox
                    Width="50"
                    HorizontalContentAlignment="Center"
                    Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=100}" />
            </ContentControl>

            <ContentControl
                Margin="8,0"
                DataContext="{Binding ExpirationDate}"
                Template="{StaticResource Element}">
                <DatePicker Width="120" SelectedDate="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=100, Converter={StaticResource DataTimeDateOnlySwitchConverter}}" />
            </ContentControl>

            <ContentControl
                Margin="20,0,0,0"
                DataContext="{Binding StopLine}"
                Template="{StaticResource Element}">
                <TextBox
                    Width="50"
                    HorizontalContentAlignment="Center"
                    Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=400}" />
            </ContentControl>

            <ContentControl
                Margin="8,0"
                DataContext="{Binding WarningLine}"
                Template="{StaticResource Element}">
                <TextBox
                    Width="50"
                    HorizontalContentAlignment="Center"
                    Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=400}" />
            </ContentControl>
        </DockPanel>


        <!--  费用  -->
        <DockPanel Margin="0,2" LastChildFill="False">

            <ContentControl DataContext="{Binding TrusteeFee}" Template="{StaticResource Element.FundFee.G}" />
            <!--<ContentControl DataContext="{Binding TrusteeGuaranteedFee}" Template="{StaticResource Element.Bool}" />-->

            <Separator Width="2" Margin="20,0" />

            <ContentControl DataContext="{Binding OutsourcingFee}" Template="{StaticResource Element.FundFee}" />
            <ContentControl DataContext="{Binding OutsourcingGuaranteedFee}" Template="{StaticResource Element.Bool}" />


        </DockPanel>



        <!--  账户  -->
        <UniformGrid Rows="1">
            <ContentControl DataContext="{Binding CollectionAccount}" Template="{StaticResource Element.Left}">
                <TextBox
                    MinWidth="300"
                    MinHeight="60"
                    Padding="30,8"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Stretch"
                    HorizontalContentAlignment="Left"
                    AcceptsReturn="True"
                    Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=100}" />
            </ContentControl>
            <ContentControl
                VerticalContentAlignment="Stretch"
                DataContext="{Binding CustodyAccount}"
                Template="{StaticResource Element.Left}">
                <TextBox
                    MinWidth="300"
                    MinHeight="60"
                    Padding="30,8"
                    HorizontalAlignment="Left"
                    HorizontalContentAlignment="Left"
                    AcceptsReturn="True"
                    Text="{Binding Data.New, UpdateSourceTrigger=PropertyChanged, Delay=100}" />
            </ContentControl>
        </UniformGrid>

        <!--  与份额相关的要素  -->
        <Grid>
            <!--<Grid Visibility="{Binding OnlyOneShare, Converter={StaticResource Boolean2VisibilityConverter}}">
                <ContentControl ContentTemplate="{StaticResource DT.Portion}" DataContext="{Binding PortionElements[0]}" />
            </Grid>-->
            <ListBox
                BorderThickness="0"
                ItemTemplate="{StaticResource DT.Portion}"
                ItemsPanel="{DynamicResource PortionItemsPanel}"
                ItemsSource="{Binding PortionElements}"
                Style="{StaticResource ListBoxCustom}" />
        </Grid>
    </StackPanel>
</UserControl>
