<UserControl
    x:Class="FMO.FundDisclosureView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:local="clr-namespace:FMO"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:md="clr-namespace:FMO.Models;assembly=FMO.Models"
    xmlns:shared="clr-namespace:FMO.Shared;assembly=FMO.Shared"
    d:DataContext="{d:DesignInstance Type=local:FundDisclosureViewModel}"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <UserControl.Resources>
        <Style
            x:Key="ListItem.Announcement"
            BasedOn="{StaticResource ListBoxItemCustom}"
            TargetType="ListBoxItem">
            <Setter Property="Margin" Value="0,1" />
        </Style>

        <DataTemplate x:Key="DT.Announcement">
            <Border Margin="0,1" Background="WhiteSmoke">
                <DockPanel>
                    <ToggleButton
                        DockPanel.Dock="Right"
                        IsChecked="{Binding IsReadOnly}"
                        Style="{StaticResource EditSwitch.Small}" />



                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition />
                            <RowDefinition />
                        </Grid.RowDefinitions>
                        <shared:ChangeableControl
                            Binding="{Binding Date}"
                            Entity="{Binding .}"
                            IsReadOnly="{Binding IsReadOnly}">
                            <shared:ChangeableControl.EditTemplate>
                                <DataTemplate>
                                    <DatePicker
                                        Width="100"
                                        SelectedDate="{Binding NewValue}"
                                        Style="{StaticResource DatePicker.Small}" />
                                </DataTemplate>
                            </shared:ChangeableControl.EditTemplate>
                        </shared:ChangeableControl>

                        <shared:ChangeableControl
                            Grid.Row="1"
                            HorizontalContentAlignment="Stretch"
                            Binding="{Binding Title}"
                            Entity="{Binding .}"
                            IsReadOnly="{Binding IsReadOnly}" />

                        <shared:FileView
                            Grid.Column="1"
                            Content="{Binding File}"
                            IsReadOnly="{Binding IsReadOnly}"
                            Style="{StaticResource DualFileStyle}" />
                    </Grid>
                </DockPanel>
            </Border>
        </DataTemplate>

    </UserControl.Resources>


    <UniformGrid Margin="10" Columns="2">
        <StackPanel Background="WhiteSmoke">
            <Border Background="Green">
                <DockPanel HorizontalAlignment="Center">
                    <TextBlock
                        Margin="0,5"
                        Foreground="White"
                        Text="公告" />
                    <Button
                        hc:IconElement.Geometry="{StaticResource f.plus}"
                        Command="{Binding AddAnnouncementCommand}"
                        Foreground="White"
                        Style="{StaticResource ButtonIcon.Small}" />
                </DockPanel>
            </Border>
            <ListBox
                shared:MaskService.IsMask="True"
                ItemTemplate="{StaticResource DT.Announcement}"
                ItemsSource="{Binding Announcements}"
                Style="{StaticResource ListBoxCustom}" />
        </StackPanel>

        <StackPanel Margin="1,0,0,0" Background="WhiteSmoke">
            <StackPanel.Resources>


                <Style
                    x:Key="Report"
                    BasedOn="{StaticResource ListBoxCustom}"
                    TargetType="ListBox">
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="Padding" Value="5" />
                    <Setter Property="ItemTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <hc:UniformSpacingPanel
                                    ChildWrapping="Wrap"
                                    Spacing="5"
                                    VerticalSpacing="5">
                                    <TextBlock
                                        Width="40"
                                        Height="15"
                                        VerticalAlignment="Center"
                                        FontWeight="Black"
                                        Text="{Binding Title}"
                                        TextAlignment="Center" />

                                    <shared:FileView Content="{Binding Word}" Style="{StaticResource SimpleViewOnlyFileStyle}">
                                        <shared:FileView.Header>
                                            <Viewbox Width="14" Height="14">
                                                <Path Data="{StaticResource f.file-word}" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType={x:Type Control}}}" />
                                            </Viewbox>
                                        </shared:FileView.Header>
                                    </shared:FileView>

                                    <shared:FileView
                                        Content="{Binding Excel}"
                                        HeaderTemplate="{x:Null}"
                                        Style="{StaticResource SimpleViewOnlyFileStyle}">
                                        <shared:FileView.Header>
                                            <Viewbox Width="14" Height="14">
                                                <Path Data="{StaticResource f.file-excel}" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType={x:Type Control}}}" />
                                            </Viewbox>
                                        </shared:FileView.Header>
                                    </shared:FileView>

                                    <shared:FileView Content="{Binding Pdf}" Style="{StaticResource SimpleViewOnlyFileStyle}">
                                        <shared:FileView.Header>
                                            <Viewbox Width="14" Height="14">
                                                <Path Data="{StaticResource f.file-pdf}" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType={x:Type Control}}}" />
                                            </Viewbox>
                                        </shared:FileView.Header>
                                    </shared:FileView>

                                    <shared:FileView Content="{Binding Xbrl}" Style="{StaticResource SimpleViewOnlyFileStyle}">
                                        <shared:FileView.Header>
                                            <Viewbox Width="14" Height="14">
                                                <Path Data="{StaticResource f.file-code}" Fill="{Binding Foreground, RelativeSource={RelativeSource AncestorType={x:Type Control}}}" />
                                            </Viewbox>
                                        </shared:FileView.Header>
                                    </shared:FileView>


                                    <Button
                                        hc:IconElement.Geometry="{StaticResource f.upload}"
                                        Command="{Binding UploadCommand}"
                                        Style="{StaticResource ButtonIcon.Small}" />
                                </hc:UniformSpacingPanel>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
                <Style
                    x:Key="Update"
                    BasedOn="{StaticResource ListBoxCustom}"
                    TargetType="ListBox">
                    <Setter Property="BorderThickness" Value="0" />
                    <Setter Property="Padding" Value="5" />
                    <Setter Property="ItemTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <hc:UniformSpacingPanel
                                    Margin="0,1"
                                    ChildWrapping="Wrap"
                                    Spacing="5"
                                    VerticalSpacing="5">
                                    <TextBlock
                                        Width="40"
                                        VerticalAlignment="Center"
                                        FontWeight="Black"
                                        Text="{Binding Title}"
                                        TextAlignment="Center" />

                                    <shared:FileView
                                        Content="{Binding Investor}"
                                        Header="投资人信息表"
                                        Style="{StaticResource SimpleViewOnlyFileStyle}" />
                                    <shared:FileView
                                        Margin="10,0,0,0"
                                        Content="{Binding Operation}"
                                        Header="运行信息表"
                                        Style="{StaticResource SimpleViewOnlyFileStyle}" />

                                    <Button
                                        hc:IconElement.Geometry="{StaticResource f.upload}"
                                        Command="{Binding UploadOperationCommand}"
                                        Style="{StaticResource ButtonIcon.Small}" />
                                </hc:UniformSpacingPanel>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>

            </StackPanel.Resources>
            <Border Background="Green">
                <TextBlock
                    Margin="0,5"
                    HorizontalAlignment="Center"
                    Foreground="White"
                    Text="定期报告" />
            </Border>


            <Expander Header="月报">
                <ListBox
                    shared:MaskService.IsMask="True"
                    ItemsSource="{Binding Monthly.View}"
                    Style="{StaticResource Report}" />
            </Expander>
            <Expander Header="季报" IsExpanded="True">
                <ListBox
                    shared:MaskService.IsMask="True"
                    ItemsSource="{Binding Quarterly.View}"
                    Style="{StaticResource Report}" />
            </Expander>
            <Expander Header="半年报">
                <ListBox
                    shared:MaskService.IsMask="True"
                    ItemsSource="{Binding SemiAnnually.View}"
                    Style="{StaticResource Report}" />
            </Expander>
            <Expander Header="年报" IsExpanded="True">
                <ListBox
                    shared:MaskService.IsMask="True"
                    ItemsSource="{Binding Annually.View}"
                    Style="{StaticResource Report}" />
            </Expander>
            <Expander Header="季度更新" IsExpanded="True">
                <ListBox
                    shared:MaskService.IsMask="True"
                    ItemsSource="{Binding QuarterlyUpdate.View}"
                    Style="{StaticResource Update}" />
            </Expander>
            <!--<ListBox
                shared:MaskService.IsMask="True"
                ItemsSource="{Binding PeriodicDisclosure}"
                Style="{StaticResource ListBoxCustom}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <DockPanel>
                            <TextBlock Text="{Binding Type}" />
                            <TextBlock Margin="10,0" Text="{Binding PeriodEnd, StringFormat=yy/MM}" />
                        </DockPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>-->
        </StackPanel>
    </UniformGrid>
</UserControl>
